package
{
import flash.display.*
import flash.events.*
import flash.utils.*
import flash.system.*
import flash.media.*
import flash.display3D.*


public class Main extends Sprite
{
var main_obj:SoundChannel;
public var worker:Worker;
public var mc:MessageChannel


public function Main() 
{
if (Worker.current.isPrimordial) mainThread();
else workerThread();

}

private function mainThread():void
{

var local1:Sound = new Sound();
var func_as_callback_1:Function = as_callback_1(local1);local1.addEventListener("sampleData",func_as_callback_1,false,64,false);
var main_obj = local1.play();

worker = WorkerDomain.current.createWorker(this.loaderInfo.bytes)
mc = worker.createMessageChannel(Worker.current)
mc.addEventListener(Event.CHANNEL_MESSAGE, onMessage)
worker.setSharedProperty("mc", mc)
worker.setSharedProperty("main_obj", main_obj)
worker.start()

}
private function workerThread():void
{
var main_obj:SoundChannel = Worker.current.getSharedProperty("main_obj")
var mc:MessageChannel = Worker.current.getSharedProperty("mc")
try{
main_obj.stop();
}
catch(myError:Error){}
mc.send("xxxxxxxxxxxxxxxxxxx")

}
private function onMessage(e:Event):void
{
}
function as_callback_1(obj:Sound):Function {
return function(e:Event):void {
obj.play();
};
}


}

}
